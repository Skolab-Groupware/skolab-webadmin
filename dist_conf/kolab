BASHELL=${libdir}/openpkg/bash
PERL=${bindir}/perl
PHP=${bindir}/php
KOLABRC=${bindir}/openpkg
RPM=${KOLABRC} rpm
TAR=${libdir}/openpkg/tar

kolab_usr:=$(shell $(RPM) --eval %{l_nusr})
kolab_grp:=$(shell $(RPM) --eval %{l_ngrp})
kolab_musr:=$(shell $(RPM) --eval %{l_musr})
kolab_mgrp:=$(shell $(RPM) --eval %{l_mgrp})
kolab_uid:=$(shell $(RPM) --eval %{l_nuid})
kolab_gid:=$(shell $(RPM) --eval %{l_ngid})
kolab_rusr:=$(shell $(RPM) --eval %{l_rusr})
kolab_rgrp:=$(shell $(RPM) --eval %{l_rgrp})
kolab_susr:=$(shell $(RPM) --eval %{l_susr})

# Define the deamons that are executed with openpkg rc
LDAPD=openldap

kolab_rcdir=${sysconfdir}/rc.d
pkgdocdir=${datadir}/doc
kolabconf_script=${sbindir}/kolabconf

# /kolab/bin/perl -V:vendorlib | sed "s/.*'\(.*\)'\;/\1/"
perllib=${libdir}/perl/vendor_perl/5.8.8

amavisd_conffile=${sysconfdir}/amavisd/amavisd.conf
amavisd_templatedir=${sysconfdir}/amavisd/templates
amavisd_logfile=${localstatedir}/amavisd/amavisd.log
amavisd_home=${localstatedir}/amavisd
# @l_rusr@
amavisd_rusr=${kolab_rusr}
# @l_musr@
amavisd_usr=${kolab_musr}
# @l_rgrp@
amavisd_grp=${kolab_rgrp}
amavisd_pkg=amavisd

spamassassin_confdir=${sysconfdir}/spamassassin

fsl_logfile=${localstatedir}/fsl/fsl.log

clamav_confdir=${sysconfdir}/clamav
clamav_socket=${localstatedir}/clamav/clamd.sock
clamav_logfile=${localstatedir}/clamav/clamd.log
clamav_pidfile=${localstatedir}/clamav/clamd.pid
clamav_datadir=${datadir}/clamav
freshclam_logfile=${localstatedir}/clamav/freshclam.log
freshclam_pidfile=${sysrundir}/freshclam.pid
# @l_rusr@
clamav_rusr=${kolab_rusr}
# @l_musr@
clamav_usr=${kolab_musr}
# @l_rgrp@
clamav_grp=${kolab_rgrp}

# @l_musr@
# @l_rgrp@


emailscan_usr=${kolab_rusr}
emailscan_grp=${kolab_rgrp}

emailserver_confdir=${sysconfdir}/postfix
emailserver_socket=${localstatedir}/kolab/lmtp
emailserver_localstatedir=${localstatedir}/postfix
emailserver_logfile=${emailserver_localstatedir}/log/postfix.log
emailserver_usr=${kolab_usr}
emailserver_musr=${kolab_musr}
emailserver_grp=${kolab_rgrp}
# @l_musr@
emailserver_mail_owner=${kolab_musr}
emailserver_setgid_grp=${kolab_rgrp}
emailserver_default_privs=${kolab_usr}
emailserver_master_usr=${kolab_usr}
emailserver_pkg=postfix
emailserver_tables_usr=${kolab_susr}

imap_confdir=${sysconfdir}/imapd
imap_confperm=0640
# @l_musr@
imap_usr=${kolab_musr}
# @l_rgrp@
imap_grp=${kolab_rgrp}
imap_masterlogfile=${localstatedir}/imapd/log/master.log
imap_misclogfile=${localstatedir}/imapd/log/misc.log
imap_statedir=${localstatedir}/imapd
imap_spool=${imap_statedir}/spool
imap_sievedir=${imap_statedir}/sieve
imap_lmtp=${imap_statedir}/lmtp
imap_notify_socket=${imap_statedir}/socket/notify
imap_pkg=imapd


kolab_statedir=${localstatedir}/kolab
kolab_logdir=${kolab_statedir}/log
kolab_pidfile=${kolab_statedir}/kolab.pid
kolab_mailboxuiddb=${kolab_statedir}/mailbox-uidcache.db
kolab_smtpdpolicy_conffile_usr=${kolab_musr}
kolab_smtpdpolicy_conffile_grp=${kolab_grp}
kolab_php_module_prefix=
kolab_scriptsdir=$(sysconfdir)/kolab
kolab_php_smarty_prefix=Smarty
smarty_compiledir=${phplibdir2}/${kolab_php_module_prefix}admin/templates_c

kolab_pkg=kolabd
kolab_pkgs=spamassassin openldap clamav
kolab_webadmin_pkg=kolab-webadmin
kolab_filter_pkg=kolab-filter
kolab_freebusy_pkg=kolab-freebusy
perl_kolab_pkg=perl-kolab
perl_kolabconf_pkg=kolabconf
php_kolab_pkg=php-kolab
pear_horde_pkg=PEAR-Net_IMAP PEAR-Net_SMTP PEAR-Net_URL PEAR-Mail_Mime PEAR-Log PEAR-Date PEAR-Auth_SASL PEAR-Net_Sieve PEAR-Net_Socket PEAR-Net_LMTP PEAR-HTTP_Request PEAR-Mail horde-framework-kolab horde-turba-kolab horde-nag-kolab horde-kolab-client fbview-kronolith php-channel-horde horde-kolab horde-kronolith-kolab horde-mnemo-kolab horde-passwd-kolab horde-imp-kolab horde-ingo-kolab fbview-horde

# Kolab web user interface
kolab_wui=/admin

ldapserver_statedir=${localstatedir}/openldap
ldapserver_dir=${ldapserver_statedir}/openldap-data
ldapserver_replogfile=${ldapserver_statedir}/replog
ldapserver_argsfile=${ldapserver_statedir}/slapd.args
ldapserver_logfile=${ldapserver_statedir}/openldap.log
ldapserver_rundir=${ldapserver_statedir}/run
ldapserver_pidfile=${ldapserver_rundir}/slapd.pid
ldapserverslurpd_pidfile=${ldapserver_rundir}/slurpd.pid
ldapserver_schemadir=${sysconfdir}/openldap/schema
ldapserver_confdir=${sysconfdir}/openldap
# @l_musr@
ldapserver_usr=${kolab_musr}
# @l_mgrp@
ldapserver_grp=${kolab_mgrp}
ldapserver_rgrp=${kolab_rgrp}
ldapserver_rusr=${kolab_musr}

webserver_document_root=${localstatedir}/kolab/www
webserver_tmpdir=${localstatedir}/kolab/tmp
webserver_cgidir=${webserver_document_root}/cgi-bin
webserver_sessions=${localstatedir}/kolab/httpd_sessions
webserver_logdir=${localstatedir}/apache/log
webserver_acceptlock=${webserver_logdir}/accept.lock
webserver_runtime_status=${webserver_logdir}/apache_runtime_status
webserver_errorlogfile=${webserver_logdir}/apache-error.log
webserver_accesslogfile=${webserver_logdir}/apache-access.log
webserver_confdir=${sysconfdir}/apache
webserver_pidfile=${localstatedir}/apache/run/apache.pid
webserver_mime_magicfile=${sysconfdir}/apache/mime.magic
webserver_mime_typesfile=${sysconfdir}/apache/mime.types
webserver_sslscache=${webserver_logdir}/ssl_scache
webserver_sslmutex=${webserver_logdir}/ssl_mutex
# webserver_web_prefix is empty indeed
webserver_web_prefix=
webserver_musr=${kolab_musr}
webserver_usr=${kolab_usr}
webserver_grp=${kolab_grp}
webserver_pkg=apache

phpini_dir=${sysconfdir}/apache
phplibdir=${libdir}/php
phplibdir2=${kolab_statedir}/php
phppeardir=${phplibdir2}/pear

sasl_authdconffile=${sysconfdir}/sasl/saslauthd.conf
sasl_smtpconffile=${sysconfdir}/sasl/smtpd.conf
sasl_logfile=${localstatedir}/sasl/log/saslauthd.log

sysrundir=${localstatedir}/run

resmgr_logdir=${localstatedir}/kolab-filter/log
resmgr_confdir=${localstatedir}/kolab-filter/scripts
resmgr_conffile_usr=${kolab_musr}
resmgr_conffile_grp=${kolab_grp}
resmgr_tmpdir=${localstatedir}/kolab-filter/tmp
resmgr_scriptsdir=${localstatedir}/kolab-filter/scripts
# @l_musr@
resmgr_usr=${kolab_musr}
# @l_ngrp@
resmgr_grp=${kolab_grp}

fbview_logfile=${localstatedir}/resmgr/fbview.log
freebusy_logdir=${localstatedir}/kolab-freebusy/log
freebusy_confdir=${webserver_document_root}/freebusy
freebusy_cachedir=${localstatedir}/kolab-freebusy/cache
freebusy_usr=${kolab_musr}
freebusy_grp=${kolab_grp}

graveyard_uidcache=${kolab_statedir}/graveyard-uidcache.db
graveyard_tscache=${kolab_statedir}/graveyard-tscache.db

backupdir=${sysconfdir}/kolab

pki_grp=${kolab_rgrp}

aliases_file=${emailserver_confdir}/aliases
